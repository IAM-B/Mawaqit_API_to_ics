============================= test session starts ==============================
platform linux -- Python 3.13.3, pytest-8.0.2, pluggy-1.6.0 -- /home/iamb/gitHub/Mawaqit_API_to_ics/env-planner/bin/python
cachedir: .pytest_cache
rootdir: /home/iamb/gitHub/Mawaqit_API_to_ics
configfile: pytest.ini
testpaths: tests
plugins: cov-4.1.0
collecting ... collected 141 items

tests/integration/api/test_api_endpoints.py::test_get_countries PASSED   [  0%]
tests/integration/api/test_api_endpoints.py::test_get_mosques PASSED     [  1%]
tests/integration/api/test_api_endpoints.py::test_get_mosques_with_text PASSED [  2%]
tests/integration/api/test_api_endpoints.py::test_planner_post_endpoint PASSED [  2%]
tests/integration/api/test_api_endpoints.py::test_planner_post_invalid_data PASSED [  3%]
tests/integration/api/test_api_endpoints.py::test_edit_slot_get PASSED   [  4%]
tests/integration/api/test_api_endpoints.py::test_edit_slot_post PASSED  [  4%]
tests/integration/api/test_basic_endpoints.py::test_index_page PASSED    [  5%]
tests/integration/api/test_basic_endpoints.py::test_planner_page PASSED  [  6%]
tests/integration/api/test_basic_endpoints.py::test_favicon PASSED       [  7%]
tests/integration/api/test_basic_endpoints.py::test_404_error PASSED     [  7%]
tests/integration/api/test_basic_endpoints.py::test_405_error PASSED     [  8%]
tests/integration/api/test_basic_endpoints.py::test_500_error XFAIL      [  9%]
tests/integration/api/test_basic_endpoints.py::test_get_countries_endpoint PASSED [  9%]
tests/integration/api/test_basic_endpoints.py::test_get_mosques_endpoint PASSED [ 10%]
tests/integration/api/test_basic_endpoints.py::test_edit_slot_endpoint PASSED [ 11%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_index_route PASSED [ 12%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_favicon_route PASSED [ 12%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_page_route PASSED [ 13%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_success_response PASSED [ 14%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_redirect_response PASSED [ 14%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_exception PASSED [ 15%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_value_error PASSED [ 16%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_runtime_error PASSED [ 17%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_generic_exception PASSED [ 17%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_get_mosques_route PASSED [ 18%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_get_mosques_route_error PASSED [ 19%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_invalid_padding_type PASSED [ 19%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_missing_required_fields PASSED [ 20%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_negative_padding PASSED [ 21%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_planner_post_invalid_scope PASSED [ 21%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_generate_planning_ajax_success PASSED [ 22%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_generate_planning_ajax_tuple_response PASSED [ 23%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_generate_planning_ajax_exception PASSED [ 24%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_get_countries_route PASSED [ 24%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_edit_slot_route_get PASSED [ 25%]
tests/integration/controllers/test_main_controller.py::TestMainController::test_edit_slot_route_post PASSED [ 26%]
tests/integration/ics/test_ics_generation.py::test_generate_prayer_ics_file PASSED [ 26%]
tests/integration/modules/test_empty_generator_integration.py::test_to_datetime PASSED [ 27%]
tests/integration/modules/test_empty_generator_integration.py::test_format_duration PASSED [ 28%]
tests/integration/modules/test_empty_generator_integration.py::test_generate_empty_slot_events PASSED [ 29%]
tests/integration/modules/test_empty_generator_integration.py::test_generate_empty_by_scope_today PASSED [ 29%]
tests/integration/modules/test_empty_generator_integration.py::test_generate_empty_by_scope_month PASSED [ 30%]
tests/integration/modules/test_empty_generator_integration.py::test_generate_empty_by_scope_year PASSED [ 31%]
tests/integration/modules/test_empty_generator_integration.py::test_generate_empty_by_scope_invalid_scope PASSED [ 31%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mawaqit_data_success PASSED [ 32%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mawaqit_data_404 PASSED [ 33%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mawaqit_data_http_error PASSED [ 34%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mawaqit_data_no_script PASSED [ 34%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mawaqit_data_invalid_json PASSED [ 35%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mosques_data_today PASSED [ 36%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mosques_data_month PASSED [ 36%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mosques_data_year PASSED [ 37%]
tests/integration/modules/test_mawaqit_fetcher.py::test_fetch_mosques_data_invalid_scope PASSED [ 38%]
tests/integration/modules/test_mawaqit_fetcher.py::test_get_prayer_times_of_the_day_success PASSED [ 39%]
tests/integration/modules/test_mawaqit_fetcher.py::test_get_prayer_times_of_the_day_incomplete PASSED [ 39%]
tests/integration/modules/test_mawaqit_fetcher.py::test_get_month_success PASSED [ 40%]
tests/integration/modules/test_mawaqit_fetcher.py::test_get_month_invalid_month PASSED [ 41%]
tests/integration/modules/test_mawaqit_fetcher.py::test_get_month_unavailable PASSED [ 41%]
tests/integration/modules/test_mawaqit_fetcher.py::test_get_calendar_success PASSED [ 42%]
tests/integration/modules/test_mosque_search_integration.py::test_list_countries_integration PASSED [ 43%]
tests/integration/modules/test_mosque_search_integration.py::test_list_mosques_by_country_integration PASSED [ 43%]
tests/integration/modules/test_mosque_search_integration.py::test_get_formatted_mosques_integration PASSED [ 44%]
tests/integration/modules/test_planner_view.py::test_normalize_month_data_valid PASSED [ 45%]
tests/integration/modules/test_planner_view.py::test_normalize_month_data_invalid PASSED [ 46%]
tests/integration/modules/test_planner_view.py::test_normalize_year_data_valid PASSED [ 46%]
tests/integration/modules/test_planner_view.py::test_normalize_year_data_invalid PASSED [ 47%]
tests/integration/modules/test_planner_view.py::test_handle_planner_post_today PASSED [ 48%]
tests/integration/modules/test_planner_view.py::test_handle_planner_post_month PASSED [ 48%]
tests/integration/modules/test_planner_view.py::test_handle_planner_post_year PASSED [ 49%]
tests/integration/modules/test_planner_view.py::test_handle_planner_post_invalid_scope PASSED [ 50%]
tests/integration/modules/test_planner_view.py::test_handle_planner_post_invalid_padding PASSED [ 51%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_success_today PASSED [ 51%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_success_month PASSED [ 52%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_missing_parameters PASSED [ 53%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_invalid_padding PASSED [ 53%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_invalid_scope PASSED [ 54%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_fallback_to_json PASSED [ 55%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_fallback_to_web PASSED [ 56%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_no_address_fallback PASSED [ 56%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerAjaxEndpoint::test_planner_ajax_no_coordinates_fallback PASSED [ 57%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerViewErrorHandling::test_handle_planner_ajax_invalid_padding_type PASSED [ 58%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerViewErrorHandling::test_handle_planner_ajax_negative_padding PASSED [ 58%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerViewErrorHandling::test_handle_planner_ajax_invalid_scope PASSED [ 59%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerViewErrorHandling::test_handle_planner_ajax_missing_parameters PASSED [ 60%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerViewErrorHandling::test_handle_planner_ajax_fetch_error PASSED [ 60%]
tests/integration/modules/test_planner_view_integration.py::TestPlannerViewErrorHandling::test_handle_planner_ajax_invalid_coordinates PASSED [ 61%]
tests/integration/modules/test_prayer_generator_integration.py::test_parse_time_str_valid PASSED [ 62%]
tests/integration/modules/test_prayer_generator_integration.py::test_parse_time_str_invalid PASSED [ 63%]
tests/integration/modules/test_prayer_generator_integration.py::test_generate_prayer_ics_file_today PASSED [ 63%]
tests/integration/modules/test_prayer_generator_integration.py::test_generate_prayer_ics_file_month PASSED [ 64%]
tests/integration/modules/test_prayer_generator_integration.py::test_generate_prayer_ics_file_year PASSED [ 65%]
tests/integration/modules/test_prayer_generator_integration.py::test_generate_prayer_ics_file_invalid_scope PASSED [ 65%]
tests/integration/modules/test_slots_generator_integration.py::test_to_datetime PASSED [ 66%]
tests/integration/modules/test_slots_generator_integration.py::test_format_duration PASSED [ 67%]
tests/integration/modules/test_slots_generator_integration.py::test_generate_slot_ics_file PASSED [ 68%]
tests/integration/modules/test_slots_generator_integration.py::test_generate_slots_by_scope_today PASSED [ 68%]
tests/integration/modules/test_slots_generator_integration.py::test_generate_slots_by_scope_month PASSED [ 69%]
tests/integration/modules/test_slots_generator_integration.py::test_generate_slots_by_scope_year PASSED [ 70%]
tests/integration/modules/test_slots_generator_integration.py::test_generate_slots_by_scope_invalid_scope PASSED [ 70%]
tests/unit/modules/test_empty_generator_unit.py::test_format_duration PASSED [ 71%]
tests/unit/modules/test_mosque_search.py::test_get_mosque_dir PASSED     [ 72%]
tests/unit/modules/test_mosque_search.py::test_format_country_display PASSED [ 73%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_valid_list PASSED [ 73%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_invalid_list_length PASSED [ 74%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_invalid_time_format PASSED [ 75%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_string_format PASSED [ 75%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_dict_format PASSED [ 76%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_invalid_day_number PASSED [ 77%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_empty_input PASSED [ 78%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeMonthData::test_normalize_month_data_none_values PASSED [ 78%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeYearData::test_normalize_year_data_valid_format PASSED [ 79%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeYearData::test_normalize_year_data_invalid_month_format PASSED [ 80%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeYearData::test_normalize_year_data_invalid_time_format PASSED [ 80%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeYearData::test_normalize_year_data_invalid_date PASSED [ 81%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeYearData::test_normalize_year_data_empty_input PASSED [ 82%]
tests/unit/modules/test_planner_view_unit.py::TestNormalizeYearData::test_normalize_year_data_non_string_times PASSED [ 82%]
tests/unit/modules/test_planner_view_unit.py::TestGetMosqueInfoFromJson::test_get_mosque_info_from_json_found PASSED [ 83%]
tests/unit/modules/test_planner_view_unit.py::TestGetMosqueInfoFromJson::test_get_mosque_info_from_json_not_found PASSED [ 84%]
tests/unit/modules/test_planner_view_unit.py::TestGetMosqueInfoFromJson::test_get_mosque_info_from_json_invalid_json PASSED [ 85%]
tests/unit/modules/test_planner_view_unit.py::TestGetMosqueInfoFromJson::test_get_mosque_info_from_json_missing_fields PASSED [ 85%]
tests/unit/modules/test_prayer_generator_unit.py::test_parse_time_str_valid PASSED [ 86%]
tests/unit/modules/test_prayer_generator_unit.py::test_parse_time_str_invalid PASSED [ 87%]
tests/unit/modules/test_slots_generator_unit.py::test_to_datetime PASSED [ 87%]
tests/unit/modules/test_slots_generator_unit.py::test_to_datetime_invalid PASSED [ 88%]
tests/unit/modules/test_slots_generator_unit.py::test_format_duration PASSED [ 89%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_basic PASSED [ 90%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_with_padding PASSED [ 90%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_different_timezone PASSED [ 91%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_close_prayers PASSED [ 92%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_edge_cases PASSED [ 92%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_error_handling PASSED [ 93%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_invalid_input PASSED [ 94%]
tests/unit/modules/test_time_segmenter.py::test_segment_available_time_invalid_slots PASSED [ 95%]
tests/unit/modules/test_time_segmenter.py::test_generate_empty_slots_basic PASSED [ 95%]
tests/unit/modules/test_time_segmenter.py::test_generate_empty_slots_invalid_range PASSED [ 96%]
tests/unit/modules/test_time_segmenter.py::test_generate_empty_slots_partial_hour PASSED [ 97%]
tests/unit/utils/test_slot_utils.py::test_round_down_to_hour PASSED      [ 97%]
tests/unit/utils/test_slot_utils.py::test_round_up_to_hour PASSED        [ 98%]
tests/unit/utils/test_slot_utils.py::test_parse_time_str PASSED          [ 99%]
tests/unit/utils/test_slot_utils.py::test_adjust_slots_rounding PASSED   [100%]

---------- coverage: platform linux, python 3.13.3-final-0 -----------
Name                                Stmts   Miss  Cover   Missing
-----------------------------------------------------------------
app/__init__.py                        12      0   100%
app/controllers/error_handlers.py      11      1    91%   15
app/controllers/main.py                74      9    88%   75, 82, 112-123
app/modules/empty_generator.py        121      7    94%   92, 97, 179, 213, 221, 226-227
app/modules/mawaqit_fetcher.py         71      5    93%   40, 64, 117, 156, 180
app/modules/mosque_search.py           31      0   100%
app/modules/prayer_generator.py       101     11    89%   89, 103, 113, 124-125, 140-141, 147, 156, 162-163
app/modules/slot_editor.py             18      6    67%   6-12
app/modules/slot_utils.py              30      1    97%   69
app/modules/slots_generator.py        103      7    93%   88, 94, 152, 187, 195, 200-201
app/modules/time_segmenter.py          48      2    96%   82-83
app/views/planner_view.py             372    121    67%   38, 42-44, 94-96, 137, 141-143, 169, 181-183, 264-270, 274-280, 284, 286, 312-318, 321-322, 329-330, 332-333, 380-424, 481-483, 578, 583-584, 592, 640-641, 648, 658-678, 718-768
-----------------------------------------------------------------
TOTAL                                 992    170    83%


======================== 140 passed, 1 xfailed in 6.61s ========================
